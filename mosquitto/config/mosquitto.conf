# ============================================
# MQTT Broker Configuration
# ============================================

# MQTT listener (port 1883)
listener 1883
protocol mqtt
allow_anonymous false           # Tắt anonymous để bắt buộc auth
password_file /mosquitto/config/password.txt

# WebSocket listener (port 9001) - cho frontend
# listener 9001
# protocol websockets
# allow_anonymous false
# password_file /mosquitto/config/password.txt

# ============================================
# Logging Configuration
# ============================================
log_dest file /mosquitto/log/mosquitto.log
log_type all
log_timestamp true
log_timestamp_format %Y-%m-%d %H:%M:%S

# ============================================
# Persistence Configuration
# ============================================
persistence true
persistence_location /mosquitto/data/
persistence_file mosquitto.db

# ============================================
# Connection Settings
# ============================================
max_connections 1000
max_inflight_messages 20
max_queued_messages 1000
max_packet_size 10485760  # 10MB

# ============================================
# Message Settings
# ============================================
max_queued_bytes 0  # Unlimited
